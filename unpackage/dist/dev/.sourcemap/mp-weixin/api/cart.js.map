{"version":3,"file":"cart.js","sources":["api/cart.js"],"sourcesContent":["import { http } from './api'\r\n/**\n * 获取购物车列表\n */\nexport const getCartList = ( success, fail) => {\r\n//\tawait uni.request({\r\n//\t    url: http + '/user/getCartList',\r\n//\t    method: 'GET',\r\n//\t    header: {\r\n//\t         \"Content-Type\": \"application/json\"\r\n//\t    },\r\n//\t    success: (res) => {\r\n//          console.log('getCartList: ok')\r\n//\t        success(res)\r\n//\t    },\r\n//\t    fail: (res) => {\r\n//\t        fail(res)\r\n//\t    }\r\n//\t})\n  return new Promise((resolve) => {\n    resolve({\n      code: 200,\n      data: [\n        { \n          id: 1, \n          name: \"宫保鸡丁\", \n          price: 28.00, \n          quantity: 2 \n        },\n        { \n          id: 2, \n          name: \"鱼香肉丝\", \n          price: 25.00, \n          quantity: 5 \n        },\r\n\t\t{\r\n\t\t  id: 3,\r\n\t\t  name: \"清炒时蔬\", \r\n\t\t  price: 18.00, \r\n\t\t  quantity: 1\r\n\t\t}\n      ],\n      msg: \"获取成功\"\n    });\n  });\n};\n\n/**\n * 更新购物车商品数量\n * @param {number} dishId - 菜品ID\n * @param {number} quantity - 数量（0表示删除）\n */\nexport const updateCart = (dishId, quantity, success, fail) => {\r\n\t//\tawait uni.request({\r\n\t//\t    url: http + '/user/updateCart',\r\n\t//\t    method: 'POST',\r\n\t//\t    header: {\r\n\t//\t         \"Content-Type\": \"application/json\"\r\n\t//\t    },\r\n\t//      data：{\r\n\t//\t        dishId,\n    //          quantity    \r\n\t//      },\r\n\t//\t    success: (res) => {\r\n\t//          console.log('updateCart: ok')\r\n\t//\t        success(res)\r\n\t//\t    },\r\n\t//\t    fail: (res) => {\r\n\t//\t        fail(res)\r\n\t//\t    }\r\n\t//\t})\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      if (quantity < 0) {\n        resolve({\n          code: 400,\n          msg: \"数量不能为负数\"\n        });\n        return;\n      }\n      \n      resolve({\n        code: 200,\n        msg: quantity === 0 ? \"移除成功\" : \"更新成功\"\n      });\n    }, 200);\n  });\n};"],"names":[],"mappings":";;AAIY,MAAC,cAAc,CAAE,SAAS,SAAS;AAe7C,SAAO,IAAI,QAAQ,CAAC,YAAY;AAC9B,YAAQ;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,QACJ;AAAA,UACE,IAAI;AAAA,UACJ,MAAM;AAAA,UACN,OAAO;AAAA,UACP,UAAU;AAAA,QACX;AAAA,QACD;AAAA,UACE,IAAI;AAAA,UACJ,MAAM;AAAA,UACN,OAAO;AAAA,UACP,UAAU;AAAA,QACX;AAAA,QACP;AAAA,UACE,IAAI;AAAA,UACJ,MAAM;AAAA,UACN,OAAO;AAAA,UACP,UAAU;AAAA,QACX;AAAA,MACI;AAAA,MACD,KAAK;AAAA,IACX,CAAK;AAAA,EACL,CAAG;AACH;AAOY,MAAC,aAAa,CAAC,QAAQ,UAAU,SAAS,SAAS;AAmB7D,SAAO,IAAI,QAAQ,CAAC,YAAY;AAC9B,eAAW,MAAM;AACf,UAAI,WAAW,GAAG;AAChB,gBAAQ;AAAA,UACN,MAAM;AAAA,UACN,KAAK;AAAA,QACf,CAAS;AACD;AAAA,MACD;AAED,cAAQ;AAAA,QACN,MAAM;AAAA,QACN,KAAK,aAAa,IAAI,SAAS;AAAA,MACvC,CAAO;AAAA,IACF,GAAE,GAAG;AAAA,EACV,CAAG;AACH;;;"}